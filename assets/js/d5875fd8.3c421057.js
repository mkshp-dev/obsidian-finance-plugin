"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[568],{2774:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>c,default:()=>m,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"core-features/unified-dashboard/commodities","title":"Commodities Tab","description":"The Commodities Tab manages all currencies and assets used in your Beancount ledger\u2014from stocks and crypto to forex and commodities.","source":"@site/docs/core-features/unified-dashboard/commodities.md","sourceDirName":"core-features/unified-dashboard","slug":"/core-features/unified-dashboard/commodities","permalink":"/obsidian-finance-plugin/docs/core-features/unified-dashboard/commodities","draft":false,"unlisted":false,"editUrl":"https://github.com/mkshp-dev/obsidian-finance-plugin/tree/dev/docs-site/docs/core-features/unified-dashboard/commodities.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Balance Sheet Tab","permalink":"/obsidian-finance-plugin/docs/core-features/unified-dashboard/balance-sheet"},"next":{"title":"Settings","permalink":"/obsidian-finance-plugin/docs/configuration/settings"}}');var r=n(4848),o=n(8453);const t={sidebar_position:5},c="Commodities Tab",a={},d=[{value:"\ud83e\ude99 Features",id:"-features",level:2},{value:"Commodity Overview",id:"commodity-overview",level:3},{value:"Metadata Management",id:"metadata-management",level:3},{value:"Price Validation",id:"price-validation",level:3},{value:"\ud83d\udd0d Behind the Scenes: BQL Queries",id:"-behind-the-scenes-bql-queries",level:2},{value:"List All Commodities",id:"list-all-commodities",level:3},{value:"Commodity Price Data",id:"commodity-price-data",level:3},{value:"Commodity Details (for modal)",id:"commodity-details-for-modal",level:3}];function l(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"commodities-tab",children:"Commodities Tab"})}),"\n",(0,r.jsxs)(i.p,{children:["The ",(0,r.jsx)(i.strong,{children:"Commodities Tab"})," manages all currencies and assets used in your Beancount ledger\u2014from stocks and crypto to forex and commodities."]}),"\n",(0,r.jsx)(i.h2,{id:"-features",children:"\ud83e\ude99 Features"}),"\n",(0,r.jsx)(i.h3,{id:"commodity-overview",children:"Commodity Overview"}),"\n",(0,r.jsx)(i.p,{children:"View all commodities declared in your ledger with:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Symbol"}),": Ticker or commodity code (e.g., ",(0,r.jsx)(i.code,{children:"AAPL"}),", ",(0,r.jsx)(i.code,{children:"BTC"}),", ",(0,r.jsx)(i.code,{children:"EUR"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Latest Price"}),": Most recent price point with date"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Status Indicator"}),": Quick visual indicator of price data availability","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\ud83d\udfe2 ",(0,r.jsx)(i.strong,{children:"Automated"}),": Price fetcher configured and working"]}),"\n",(0,r.jsxs)(i.li,{children:["\u26aa ",(0,r.jsx)(i.strong,{children:"Manual"}),": No automated source configured"]}),"\n",(0,r.jsxs)(i.li,{children:["\u274c ",(0,r.jsx)(i.strong,{children:"Error"}),": Price fetcher failed"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"metadata-management",children:"Metadata Management"}),"\n",(0,r.jsx)(i.p,{children:"For each commodity, you can configure:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Commodity Details"}),": Access via click to open detailed view modal"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Price Source"}),": The fetch source string (e.g., ",(0,r.jsx)(i.code,{children:"yahoo/AAPL"})," for Yahoo Finance)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Logo/Icon URL"}),": Custom image URL for the commodity"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Display Name"}),": Human-readable name"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Quote Currency"}),": The currency this commodity is priced in"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"price-validation",children:"Price Validation"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Test Price Source"}),": Verify your price fetcher configuration works correctly"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Validate Format"}),": Ensures the price source string is valid"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Live Testing"}),": Runs ",(0,r.jsx)(i.code,{children:"bean-price"})," to check if the source can actually fetch prices"]}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"-behind-the-scenes-bql-queries",children:"\ud83d\udd0d Behind the Scenes: BQL Queries"}),"\n",(0,r.jsx)(i.p,{children:"The Commodities tab uses specialized queries to access Beancount's commodity and price data:"}),"\n",(0,r.jsx)(i.h3,{id:"list-all-commodities",children:"List All Commodities"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"SELECT name AS name_ FROM #commodities GROUP BY name\n"})}),"\n",(0,r.jsx)(i.p,{children:"Retrieves all commodity symbols declared in your ledger."}),"\n",(0,r.jsx)(i.h3,{id:"commodity-price-data",children:"Commodity Price Data"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"SELECT last(date) AS date_, last(currency) AS currency_, round(getprice(last(currency), 'USD'),2) AS price_, currency_meta(last(currency), 'logo') AS logo_, bool(today()-1<last(date)) AS islatest_ FROM #prices GROUP BY currency\n"})}),"\n",(0,r.jsx)(i.p,{children:"This query:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Gets the most recent price for each commodity"}),"\n",(0,r.jsx)(i.li,{children:"Converts to your operating currency"}),"\n",(0,r.jsx)(i.li,{children:"Retrieves logo metadata from commodity directives"}),"\n",(0,r.jsx)(i.li,{children:'Flags prices updated within the last day as "latest"'}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"commodity-details-for-modal",children:"Commodity Details (for modal)"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-sql",children:"SELECT name AS name_, last(meta) AS meta_, currency_meta(last(name),'logo') AS logo_, currency_meta(last(name), 'price') AS pricemetadata_, meta('filename') AS filename_, meta('lineno') AS lineno_ FROM #commodities WHERE name='AAPL'\n"})}),"\n",(0,r.jsx)(i.p,{children:"Retrieves full metadata including:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Logo URL"}),"\n",(0,r.jsx)(i.li,{children:'Price source configuration (e.g., "yahoo/AAPL")'}),"\n",(0,r.jsx)(i.li,{children:"File location for direct editing"}),"\n"]}),"\n",(0,r.jsxs)(i.admonition,{type:"tip",children:[(0,r.jsxs)(i.p,{children:["The ",(0,r.jsx)(i.code,{children:"currency_meta()"})," function accesses metadata defined in your commodity directives, like:"]}),(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-beancount",children:'2020-01-01 commodity AAPL\n  name: "Apple Inc."\n  price: "yahoo/AAPL"\n  logo: "https://example.com/aapl.png"\n'})})]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Learn More:"})," See the ",(0,r.jsx)(i.a,{href:"/obsidian-finance-plugin/docs/core-features/architecture-queries",children:"Architecture & Queries"})," page for all plugin queries."]})]})}function m(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>c});var s=n(6540);const r={},o=s.createContext(r);function t(e){const i=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);