"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[8134],{6845:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"backend-api","title":"Backend API Reference","description":"This page documents the REST endpoints exposed by the plugin backend implemented in src/backend/journal_api.py.","source":"@site/docs/backend-api.md","sourceDirName":".","slug":"/backend-api","permalink":"/obsidian-finance-plugin/docs/backend-api","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/backend-api.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"tutorialSidebar","previous":{"title":"Settings","permalink":"/obsidian-finance-plugin/docs/settings"}}');var c=i(4848),d=i(8453);const r={sidebar_position:9},t="Backend API Reference",l={},o=[];function a(e){const n={code:"code",h1:"h1",header:"header",li:"li",p:"p",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.header,{children:(0,c.jsx)(n.h1,{id:"backend-api-reference",children:"Backend API Reference"})}),"\n",(0,c.jsxs)(n.p,{children:["This page documents the REST endpoints exposed by the plugin backend implemented in ",(0,c.jsx)(n.code,{children:"src/backend/journal_api.py"}),"."]}),"\n",(0,c.jsx)(n.p,{children:"Endpoints"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"GET /health"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Description: health check"}),"\n",(0,c.jsxs)(n.li,{children:["Response: ",(0,c.jsx)(n.code,{children:'{ "status": "ok", "timestamp": "..." }'})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"GET /commodities?detailed=true"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Description: list commodities with metadata and latest price"}),"\n",(0,c.jsxs)(n.li,{children:["Maps to: ",(0,c.jsx)(n.code,{children:"get_commodities_detailed()"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"GET /commodities/<symbol>"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Description: get details for a single commodity"}),"\n",(0,c.jsxs)(n.li,{children:["Maps to: ",(0,c.jsx)(n.code,{children:"get_commodity_details()"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"PUT /commodities/<symbol>"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Description: create/update commodity metadata"}),"\n",(0,c.jsxs)(n.li,{children:["Payload: ",(0,c.jsx)(n.code,{children:'{ "metadata": { <key>: <value>, ... } }'})]}),"\n",(0,c.jsxs)(n.li,{children:["Maps to: ",(0,c.jsx)(n.code,{children:"update_commodity_metadata()"})," and ",(0,c.jsx)(n.code,{children:"create_commodity_declaration()"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"POST /commodities/<symbol>/validate_price"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Description: validate ",(0,c.jsx)(n.code,{children:"price"})," metadata using ",(0,c.jsx)(n.code,{children:"bean-price -e"})]}),"\n",(0,c.jsxs)(n.li,{children:["Payload: ",(0,c.jsx)(n.code,{children:'{ "price": "<price_meta>" }'})]}),"\n",(0,c.jsxs)(n.li,{children:["Maps to: ",(0,c.jsx)(n.code,{children:"validate_price_source()"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.code,{children:"POST /prices/update"})}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Description: run ",(0,c.jsx)(n.code,{children:"bean-price"})," and write to dependencies/prices.beancount (if implemented)"]}),"\n",(0,c.jsxs)(n.li,{children:["Payload: optional ",(0,c.jsx)(n.code,{children:'{ "beancount_path": "...", "out_path": "...", "timeout": 120 }'})]}),"\n",(0,c.jsxs)(n.li,{children:["Maps to: ",(0,c.jsx)(n.code,{children:"run_bean_price_and_write()"})," (if present)"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"Transaction endpoints"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"GET /transactions"})," (list)"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"POST /transactions"})," (create) -> ",(0,c.jsx)(n.code,{children:"add_entry_to_file()"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"PUT /transactions/<id>"})," (update) -> ",(0,c.jsx)(n.code,{children:"update_transaction_in_file()"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"DELETE /transactions/<id>"})," -> ",(0,c.jsx)(n.code,{children:"delete_transaction_from_file()"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Error handling"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Successful responses typically return ",(0,c.jsx)(n.code,{children:'{ "success": true, ... }'})," or domain objects."]}),"\n",(0,c.jsxs)(n.li,{children:["Errors return ",(0,c.jsx)(n.code,{children:'{ "success": false, "error": "message" }'})," or HTTP 400/500. Check backend logs for diagnostics."]}),"\n"]}),"\n",(0,c.jsx)(n.p,{children:"Notes"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["All write operations create backups named ",(0,c.jsx)(n.code,{children:"<filename>.backup.YYYYmmdd_HHMMSS"})," before mutating files."]}),"\n",(0,c.jsxs)(n.li,{children:["The backend filters internal metadata keys (",(0,c.jsx)(n.code,{children:"lineno"}),", ",(0,c.jsx)(n.code,{children:"filename"}),") from user-visible metadata (",(0,c.jsx)(n.code,{children:"filter_user_metadata"}),")."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var s=i(6540);const c={},d=s.createContext(c);function r(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:r(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);