"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[8894],{8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},8554:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"bql","title":"BQL Queries","description":"The plugin brings the power of Beancount Query Language (BQL) directly into Obsidian. You can execute SQL-like queries against your financial data and display the results in your notes.","source":"@site/docs/bql.md","sourceDirName":".","slug":"/bql","permalink":"/obsidian-finance-plugin/docs/bql","draft":false,"unlisted":false,"editUrl":"https://github.com/mukundshelake/obsidian-finance-plugin/tree/main/docs-site/docs/bql.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Dashboard","permalink":"/obsidian-finance-plugin/docs/dashboard"},"next":{"title":"Transactions","permalink":"/obsidian-finance-plugin/docs/transactions"}}');var t=s(4848),r=s(8453);const l={sidebar_position:3},o="BQL Queries",c={},a=[{value:"\ud83d\udcca BQL Code Blocks",id:"-bql-code-blocks",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"\ud83d\udcb0 Inline BQL Queries",id:"-inline-bql-queries",level:2},{value:"Direct Queries",id:"direct-queries",level:3},{value:"Template Shorthand System",id:"template-shorthand-system",level:3},{value:"1. Create a Template File",id:"1-create-a-template-file",level:4},{value:"2. Define Shortcuts",id:"2-define-shortcuts",level:4},{value:"CHECKING: Checking account balance",id:"checking-checking-account-balance",level:2},{value:"Benefits of Inline Queries",id:"benefits-of-inline-queries",level:3},{value:"\u2699\ufe0f Configuration",id:"\ufe0f-configuration",level:2},{value:"\ud83d\udcdd Tips",id:"-tips",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"bql-queries",children:"BQL Queries"})}),"\n",(0,t.jsxs)(n.p,{children:["The plugin brings the power of ",(0,t.jsx)(n.strong,{children:"Beancount Query Language (BQL)"})," directly into Obsidian. You can execute SQL-like queries against your financial data and display the results in your notes."]}),"\n",(0,t.jsx)(n.p,{children:"The plugin supports two distinct modes for different use cases:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Code Blocks"}),": For detailed analysis and tables."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Inline Queries"}),": For embedding live values into your text."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-bql-code-blocks",children:"\ud83d\udcca BQL Code Blocks"}),"\n",(0,t.jsxs)(n.p,{children:["Use standard Markdown code blocks with the ",(0,t.jsx)(n.code,{children:"bql"})," language identifier to create formatted tables."]}),"\n",(0,t.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markdown",children:"```bql\nSELECT account, sum(position)\nWHERE account ~ '^Expenses'\nGROUP BY account\nORDER BY account\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n### Features\n- **Interactive Results**: Sortable columns and responsive layout.\n- **Refresh (\u27f3)**: Re-run the query to get the latest data.\n- **Copy (\ud83d\udccb)**: Copy the raw CSV results to your clipboard.\n- **Export (\ud83d\udce4)**: Download results as a CSV file.\n- **Toggle View**: Hide the query code to show only the results table.\n\n### Examples\n\n**List All Accounts:**\n```sql\nSELECT account GROUP BY account ORDER BY account\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Recent Transactions:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT date, payee, narration, account, position ORDER BY date DESC LIMIT 20\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Monthly Expenses:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"SELECT year, month, sum(position)\nWHERE account ~ '^Expenses'\nGROUP BY year, month\nORDER BY year DESC, month DESC\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-inline-bql-queries",children:"\ud83d\udcb0 Inline BQL Queries"}),"\n",(0,t.jsx)(n.p,{children:'Embed live financial values directly in your text using single backticks. This is perfect for daily journaling ("Spent $X today") or financial summaries ("Net worth is $Y").'}),"\n",(0,t.jsx)(n.h3,{id:"direct-queries",children:"Direct Queries"}),"\n",(0,t.jsxs)(n.p,{children:["You can write a full BQL query inside the backticks starting with ",(0,t.jsx)(n.code,{children:"bql:"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markdown",children:"My current net worth is `bql:SELECT convert(sum(position), 'USD') WHERE account ~ '^Assets'`\n\nToday I have `bql:SELECT convert(sum(position), 'USD') WHERE account ~ 'Checking'` in my checking account.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"template-shorthand-system",children:"Template Shorthand System"}),"\n",(0,t.jsxs)(n.p,{children:["For frequently used queries, you can define ",(0,t.jsx)(n.strong,{children:"Shortcuts"})," in a template file and use them with ",(0,t.jsx)(n.code,{children:"bql-sh:"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"1-create-a-template-file",children:"1. Create a Template File"}),"\n",(0,t.jsxs)(n.p,{children:["Create a markdown file (e.g., ",(0,t.jsx)(n.code,{children:"BQL-Templates.md"}),") anywhere in your vault."]}),"\n",(0,t.jsx)(n.h4,{id:"2-define-shortcuts",children:"2. Define Shortcuts"}),"\n",(0,t.jsx)(n.p,{children:"Use the following format to define shortcuts:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-markdown",children:"## WORTH: Total net worth in USD\n```bql-shorthand\nSELECT convert(sum(position), 'USD') WHERE account ~ '^Assets'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"checking-checking-account-balance",children:"CHECKING: Checking account balance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bql-shorthand",children:"SELECT convert(sum(position), 'USD') WHERE account ~ '^Assets:Checking'\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n#### 3. Configure the Plugin\nGo to **Settings \u2192 Finance Plugin \u2192 BQL Shortcuts Template Path** and enter the path to your template file (e.g., `BQL-Templates.md`).\n\n#### 4. Use Shortcuts in Notes\nNow you can use the shorthand syntax:\n\n```markdown\nMy total worth: `bql-sh:WORTH`\nChecking balance: `bql-sh:CHECKING`\n"})}),"\n",(0,t.jsx)(n.h3,{id:"benefits-of-inline-queries",children:"Benefits of Inline Queries"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Live Data"}),": Always shows current data from your ledger."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Contextual"}),": Integrating numbers into your narrative makes them more meaningful."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Reusable"}),": The template system keeps your queries organized and consistent."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-configuration",children:"\u2699\ufe0f Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["You can customize how BQL queries are displayed in ",(0,t.jsx)(n.strong,{children:"Settings \u2192 Finance Plugin \u2192 BQL Code Blocks"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Default Page Size"}),": Number of rows to show per page in tables."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Show Query by Default"}),": Whether to show the SQL code above the table."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Currency Display"}),": How currencies should be formatted."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-tips",children:"\ud83d\udcdd Tips"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Filtering"}),": Use ",(0,t.jsx)(n.code,{children:"WHERE"})," clauses effectively to scope your queries (e.g., ",(0,t.jsx)(n.code,{children:"WHERE year = 2024"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Grouping"}),": Use ",(0,t.jsx)(n.code,{children:"GROUP BY"})," to aggregate data (e.g., ",(0,t.jsx)(n.code,{children:"GROUP BY account"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Functions"}),": BQL supports functions like ",(0,t.jsx)(n.code,{children:"YEAR()"}),", ",(0,t.jsx)(n.code,{children:"MONTH()"}),", ",(0,t.jsx)(n.code,{children:"TODAY()"}),", and ",(0,t.jsx)(n.code,{children:"convert()"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Regex"}),": Use ",(0,t.jsx)(n.code,{children:"~"})," for regular expression matching on accounts or payees."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);