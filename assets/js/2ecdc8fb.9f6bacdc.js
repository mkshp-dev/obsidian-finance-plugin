"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[4060],{6940:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"transactions","title":"Transactions","description":"This page explains how the plugin creates, edits and deletes transactions and how those actions map to Beancount file edits.","source":"@site/docs/transactions.md","sourceDirName":".","slug":"/transactions","permalink":"/obsidian-finance-plugin/docs/transactions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/transactions.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Prices","permalink":"/obsidian-finance-plugin/docs/prices"},"next":{"title":"Settings","permalink":"/obsidian-finance-plugin/docs/settings"}}');var i=s(4848),a=s(8453);const o={sidebar_position:7},c="Transactions",r={},d=[];function l(n){const e={code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"transactions",children:"Transactions"})}),"\n",(0,i.jsx)(e.p,{children:"This page explains how the plugin creates, edits and deletes transactions and how those actions map to Beancount file edits."}),"\n",(0,i.jsx)(e.p,{children:"Creating transactions (UI)"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Use the New Transaction button in the Unified Dashboard or the Transaction modal (",(0,i.jsx)(e.code,{children:"src/components/TransactionForm.svelte"}),")."]}),"\n",(0,i.jsxs)(e.li,{children:["The frontend validates required fields (date, narration, postings) and sends ",(0,i.jsx)(e.code,{children:"POST /transactions"})," to the backend."]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Backend mapping"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"POST /transactions"})," -> ",(0,i.jsx)(e.code,{children:"add_entry_to_file"})," (appends transaction and creates a backup)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"PUT /transactions/<id>"})," -> ",(0,i.jsx)(e.code,{children:"update_transaction_in_file"})," (finds transaction by ",(0,i.jsx)(e.code,{children:"entry.meta['lineno']"})," and replaces the text block)"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"DELETE /transactions/<id>"})," -> ",(0,i.jsx)(e.code,{children:"delete_transaction_from_file"})]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Safety and backups"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["All modifying operations create a ",(0,i.jsx)(e.code,{children:"'ledger.beancount.backup.YYYYmmdd_HHMMSS'"})," file before writing."]}),"\n",(0,i.jsx)(e.li,{children:"When updating, the code finds start/end lines by inspecting indentation and replaces the block atomically."}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Example: updating a transaction (client request)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'PUT /transactions/abc123\n{\n  "date": "2025-01-01",\n  "narration": "Updated",\n  "postings": [ {"account":"Assets:Bank","amount":"100.00","currency":"USD"}, {"account":"Expenses:Food"} ]\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"If the backend cannot locate the transaction by lineno it returns a helpful error. Check backend logs (forwarded to the Obsidian dev console) to diagnose missing lineno or parse issues."})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(l,{...n})}):l(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>c});var t=s(6540);const i={},a=t.createContext(i);function o(n){const e=t.useContext(a);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),t.createElement(a.Provider,{value:e},n.children)}}}]);